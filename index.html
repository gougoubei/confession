<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ä¸“å±è¡¨ç™½å°åŠ©æ‰‹ â¤ï¸</title>
<style>
    body {
        background: #ffe6ea;
        font-family: 'Microsoft YaHei', sans-serif;
        text-align: center;
        padding: 1rem;
    }
    h1, h2, h3 {
        color: #f64b6b;
    }
    button {
        background-color: #f87581;
        color: white;
        border: none;
        border-radius: 10px;
        padding: 0.6em 1.4em;
        font-size: 1.1em;
        cursor: pointer;
        margin: 10px;
        transition: 0.3s;
    }
    button:hover {
        background-color: #ff5264;
        transform: scale(1.05);
    }
    .heart {
        font-size: 3rem;
        animation: heartbeat 1.5s infinite;
    }
    @keyframes heartbeat {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.2); }
    }
    .tab {
        display: none;
    }
    .active-tab {
        display: block;
    }
    .music-player {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
    }
</style>
</head>
<body>

<h1 id="question">å¯ä»¥æˆä¸ºå°å¯çˆ±çš„æ‹äººå—ï¼Ÿ</h1>
<div>
    <button id="yesBtn">å¯ä»¥</button>
    <button id="noBtn">ä¸è®¸é€‰è¿™ä¸ª!</button>
</div>
<p><b>äº²å¯†åº¦:</b> <span id="affection">0</span>/10</p>
<p id="hint"></p>

<!-- æˆåŠŸé¡µé¢ -->
<div id="successPage" class="tab">
    <div class="heart">â¤ï¸</div>
    <h1>å–œæ¬¢ä½ !!</h1>
    <h3>( >â€¿< )â™¡Â°Â°</h3>
    <p>æˆ‘ä»¬çš„æ•…äº‹æ‰åˆšåˆšå¼€å§‹...</p>
    <button onclick="showMenu()">ç»§ç»­æˆ‘ä»¬çš„æ—…ç¨‹</button>
</div>

<!-- äº’åŠ¨èœå• -->
<div id="menu" class="tab">
    <h2>ğŸ’• ä¸“å±äº’åŠ¨ç©ºé—´</h2>
    <div>
        <button onclick="switchTab('letter')">ğŸ’Œ æƒ…ä¹¦ç”Ÿæˆ</button>
        <button onclick="switchTab('game')">ğŸ® å°æ¸¸æˆ</button>
        <button onclick="switchTab('memory')">ğŸ“¸ è®°å¿†ç›¸å†Œ</button>
        <button onclick="switchTab('music')">ğŸµ éŸ³ä¹å¿ƒæƒ…</button>
    </div>

    <div id="letter" class="subtab">
        <h3>ğŸ’Œ ç”Ÿæˆä¸“å±æƒ…ä¹¦</h3>
        <button onclick="generateLetter()">ç”Ÿæˆæƒ…ä¹¦</button>
        <p id="letterText"></p>
    </div>

    <div id="game" class="subtab" style="display:none;">
        <h3>ğŸ® æƒ…ä¾£å°æ¸¸æˆ</h3>
        <select id="gameType">
            <option>é»˜å¥‘æµ‹è¯•</option>
            <option>çœŸå¿ƒè¯å¤§å†’é™©</option>
        </select>
        <button onclick="startGame()">å¼€å§‹æ¸¸æˆ</button>
        <p id="gameOutput"></p>
    </div>

    <div id="memory" class="subtab" style="display:none;">
        <h3>ğŸ“¸ æˆ‘ä»¬çš„è®°å¿†</h3>
        <input id="memoryInput" placeholder="è®°å½•æ–°çš„è®°å¿†" />
        <button onclick="addMemory()">ä¿å­˜è®°å¿†</button>
        <ul id="memoryList"></ul>
    </div>

    <div id="music" class="subtab" style="display:none;">
        <h3>ğŸµ éŸ³ä¹å¿ƒæƒ…</h3>
        <select id="songSelect">
            <option>ã€Šç”œç”œçš„ã€‹- å‘¨æ°ä¼¦</option>
            <option>ã€Šå°å¹¸è¿ã€‹- ç”°é¦¥ç”„</option>
            <option>ã€Šçˆ±ä½ ã€‹- ç‹å¿ƒå‡Œ</option>
            <option>ã€Šç®€å•çˆ±ã€‹- å‘¨æ°ä¼¦</option>
        </select>
        <button onclick="sendSong()">å‘é€æ­Œæ›²</button>
        <div id="sentSongs"></div>
    </div>
</div>

<!-- éŸ³ä¹æ’­æ”¾å™¨ -->
<audio id="bgm" src="bgm.mp3" autoplay loop></audio>
<div class="music-player">
    <button onclick="toggleMusic()">ğŸµ</button>
</div>

<script>
let affection = 0;
let rejectCount = 0;
let nickname = "å°å¯çˆ±";
const questions = [
    `å¯ä»¥æˆä¸º ${nickname} çš„æ‹äººå—ï¼Ÿ`,
    `æ„¿æ„å’Œ ${nickname} ä¸€èµ·çœ‹æ˜Ÿæ˜Ÿå—ï¼Ÿ`,
    `å¯ä»¥ç»™ ${nickname} ä¸€ä¸ªæ‹¥æŠ±å—ï¼Ÿ`,
    `æ„¿æ„å’Œ ${nickname} å…±åº¦ä½™ç”Ÿå—ï¼Ÿ`,
    `å¯ä»¥æ¯å¤©å¯¹ ${nickname} è¯´æ—©å®‰å—ï¼Ÿ`,
    `æ„¿æ„å’Œ ${nickname} åˆ†äº«æ‰€æœ‰çš„å°ç§˜å¯†å—ï¼Ÿ`,
    `å¯ä»¥ç‰µèµ· ${nickname} çš„æ‰‹å—ï¼Ÿ`,
    `æ„¿æ„å’Œ ${nickname} ä¸€èµ·å…»åªå® ç‰©å—ï¼Ÿ`,
    `å¯ä»¥é™ª ${nickname} å»çœ‹æµ·å—ï¼Ÿ`,
    `æ„¿æ„æˆä¸º ${nickname} æœ€ç‰¹åˆ«çš„äººå—ï¼Ÿ`
];
let used = [];

function newQuestion() {
    if (used.length >= questions.length) used = [];
    let available = questions.filter((_, i) => !used.includes(i));
    let index = Math.floor(Math.random() * available.length);
    let q = available[index];
    used.push(index);
    document.getElementById("question").innerText = q;
}

document.getElementById("yesBtn").onclick = () => {
    affection += 2;
    rejectCount = 0;
    document.getElementById("affection").innerText = affection;
    if (affection >= 10) showSuccess();
    else newQuestion();
};

document.getElementById("noBtn").onclick = () => {
    rejectCount++;
    affection = Math.max(0, affection - 1);
    document.getElementById("affection").innerText = affection;
    document.getElementById("noBtn").innerText = ["ä¸è®¸é€‰è¿™ä¸ª!", "æˆ‘ä¼šä¼¤å¿ƒ..", "å†æƒ³æƒ³?", "ğŸ˜­ ä¸è¡Œ"][rejectCount % 4];
    let yesBtn = document.getElementById("yesBtn");
    yesBtn.style.transform = `scale(${1 + rejectCount * 0.2})`;
    document.getElementById("hint").innerText =
        rejectCount > 3 ? "ğŸ’” å¿«ç‚¹æŒ‰é‚£ä¸ªå˜å¤§çš„æŒ‰é’®å§ï¼" : "ğŸ’” å†è€ƒè™‘ä¸€ä¸‹å˜›ï½";
};

function showSuccess() {
    document.body.innerHTML = document.getElementById("successPage").outerHTML;
    document.getElementById("successPage").classList.add("active-tab");
}

function showMenu() {
    document.body.innerHTML = document.getElementById("menu").outerHTML;
    document.getElementById("menu").classList.add("active-tab");
}

function switchTab(id) {
    document.querySelectorAll(".subtab").forEach(tab => tab.style.display = "none");
    document.getElementById(id).style.display = "block";
}

// --- å­åŠŸèƒ½å®ç° ---
function generateLetter() {
    const letters = [
        `äº²çˆ±çš„${nickname}ï¼Œé‡è§ä½ æ˜¯æˆ‘ä¸€ç”Ÿä¸­æœ€ç¾çš„æ„å¤–ã€‚`,
        `ç»™æœ€ç‰¹åˆ«çš„${nickname}ï¼šä½ çš„ç¬‘å®¹æ˜¯æˆ‘æ¯å¤©æœ€æœŸå¾…çš„é£æ™¯ã€‚`,
        `è‡´${nickname}ï¼šæˆ‘æƒ³æŠŠæ‰€æœ‰çš„æ¸©æŸ”éƒ½ç»™ä½ ã€‚`,
        `äº²çˆ±çš„${nickname}ï¼Œå’Œä½ åœ¨ä¸€èµ·çš„æ¯ä¸€åˆ»éƒ½å€¼å¾—çè—ã€‚`
    ];
    document.getElementById("letterText").innerText =
        letters[Math.floor(Math.random() * letters.length)];
}

function startGame() {
    const gameType = document.getElementById("gameType").value;
    const output = document.getElementById("gameOutput");
    if (gameType === "é»˜å¥‘æµ‹è¯•") {
        const qs = [
            `ä½ è§‰å¾—${nickname}æœ€å–œæ¬¢ä»€ä¹ˆé¢œè‰²ï¼Ÿ`,
            `${nickname}æœ€çˆ±çš„é£Ÿç‰©æ˜¯ä»€ä¹ˆï¼Ÿ`,
            `${nickname}æœ€æƒ³å»å“ªé‡Œæ—…è¡Œï¼Ÿ`
        ];
        output.innerText = qs[Math.floor(Math.random() * qs.length)];
    } else {
        const dares = [
            "åˆ†äº«ä¸€ä¸ªå°ç§˜å¯†", "ä¸ºTAå”±ä¸€é¦–æ­Œ", "å†™ä¸‹ä¸€å¥æƒ³è¯´çš„è¯", "è®¡åˆ’ä¸€æ¬¡çº¦ä¼š"
        ];
        output.innerText = dares[Math.floor(Math.random() * dares.length)];
    }
}

function addMemory() {
    const val = document.getElementById("memoryInput").value.trim();
    if (val) {
        const list = document.getElementById("memoryList");
        const li = document.createElement("li");
        li.textContent = val;
        list.appendChild(li);
        document.getElementById("memoryInput").value = "";
    }
}

function sendSong() {
    const song = document.getElementById("songSelect").value;
    const time = new Date().toLocaleString();
    const div = document.getElementById("sentSongs");
    div.innerHTML += `<p>ğŸ¶ ${time} - å·²å‘é€ï¼š${song}</p>`;
    alert(`ğŸµ å·²å‘é€ ${song} ç»™ ${nickname}ï¼`);
}

// --- éŸ³ä¹æ§åˆ¶ ---
function toggleMusic() {
    const audio = document.getElementById("bgm");
    if (audio.paused) audio.play(); else audio.pause();
}

newQuestion();
</script>
</body>
</html>
