<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>â¤ï¸</title>
<style>
    body {
        background-color: #fff0f3;
        font-family: 'Microsoft YaHei', sans-serif;
        text-align: center;
        margin: 0;
        padding: 0;
    }
    h1 {
        color: #ff4f6d;
        margin-top: 30px;
    }
    button {
        background-color: #f87581;
        color: white;
        border: none;
        border-radius: 10px;
        padding: 0.6em 1.5em;
        margin: 10px;
        font-size: 1.2em;
        transition: all 0.3s;
        cursor: pointer;
    }
    button:hover {
        background-color: #ff5264;
        transform: scale(1.05);
    }
    #yesBtn {
        transform: scale(1);
        transition: transform 0.3s ease;
    }
    .heart {
        font-size: 4rem;
        animation: heartbeat 1.5s ease-in-out infinite both;
    }
    @keyframes heartbeat {
        from { transform: scale(1); }
        50% { transform: scale(1.1); }
        to { transform: scale(1); }
    }
    .music-player {
        position: fixed;
        bottom: 20px;
        right: 20px;
    }
    #question {
        font-size: 1.3em;
        color: #333;
        margin-top: 40px;
    }
    .success {
        text-align: center;
        margin-top: 100px;
    }
</style>
</head>
<body>

<h1>ğŸ’•</h1>
<div id="game">
    <div id="question"></div>
    <div>
        <button id="yesBtn">å¯ä»¥</button>
        <button id="noBtn">ä¸è¡Œ</button>
    </div>
    <p id="affection">äº²å¯†åº¦: 0/10</p>
    <p id="hint"></p>
</div>

<div id="successPage" style="display:none;">
    <div class="heart">â¤ï¸</div>
    <h2>!!å–œæ¬¢ä½ !!</h2>
    <p>( >â€¿< )â™¡Â°Â°</p>
    <button onclick="showMenu()">ç»§ç»­æˆ‘ä»¬çš„æ—…ç¨‹</button>
</div>

<div id="menuPage" style="display:none;">
    <h2>ğŸ’• äº’åŠ¨ç©ºé—´</h2>
    <button onclick="showTab('letter')">ğŸ’Œ æƒ…ä¹¦ç”Ÿæˆ</button>
    <button onclick="showTab('game')">ğŸ® å°æ¸¸æˆ</button>
    <button onclick="showTab('memory')">ğŸ“¸ è®°å¿†ç›¸å†Œ</button>
    <button onclick="showTab('music')">ğŸµ éŸ³ä¹å¿ƒæƒ…</button>

    <div id="content"></div>
</div>

<!-- éŸ³ä¹æ’­æ”¾å™¨ -->
<div class="music-player">
    <button onclick="toggleMusic()">ğŸµ</button>
</div>
<audio id="bgm" autoplay loop>
    <source src="bgm.mp3" type="audio/mp3">
</audio>

<script>
const nickname = "æŸæŸæŸ";
let affection = 0;
let rejectCount = 0;
let usedQuestions = [];
let yesScale = 1.0;
let showMenuPage = false;

const questions = [
    `å¯ä»¥æˆä¸º ${nickname} çš„æ‹äººå—ï¼Ÿ`,
    `æ„¿æ„å’Œ ${nickname} ä¸€èµ·çœ‹æ˜Ÿæ˜Ÿå—ï¼Ÿ`,
    `å¯ä»¥ç»™ ${nickname} ä¸€ä¸ªæ‹¥æŠ±å—ï¼Ÿ`,
    `æ„¿æ„å’Œ ${nickname} å…±åº¦ä½™ç”Ÿå—ï¼Ÿ`,
    `å¯ä»¥æ¯å¤©å¯¹ ${nickname} è¯´æ—©å®‰å—ï¼Ÿ`,
    `æ„¿æ„å’Œ ${nickname} åˆ†äº«æ‰€æœ‰çš„å°ç§˜å¯†å—ï¼Ÿ`,
    `å¯ä»¥ç‰µèµ· ${nickname} çš„æ‰‹å—ï¼Ÿ`,
    `æ„¿æ„å’Œ ${nickname} ä¸€èµ·å…»åªå® ç‰©å—ï¼Ÿ`,
    `å¯ä»¥é™ª ${nickname} å»çœ‹æµ·å—ï¼Ÿ`,
    `æ„¿æ„æˆä¸º ${nickname} æœ€ç‰¹åˆ«çš„äººå—ï¼Ÿ`,
    `å¯ä»¥ç»™ ${nickname} å†™ä¸€å°æƒ…ä¹¦å—ï¼Ÿ`,
    `æ„¿æ„å’Œ ${nickname} ä¸€èµ·æ…¢æ…¢å˜è€å—ï¼Ÿ`
];

function newQuestion() {
    if (usedQuestions.length >= questions.length) usedQuestions = [];
    let available = questions.filter((q, i) => !usedQuestions.includes(i));
    let qIndex = Math.floor(Math.random() * available.length);
    let selected = questions.indexOf(available[qIndex]);
    usedQuestions.push(selected);
    document.getElementById("question").innerText = questions[selected];
}

newQuestion();

document.getElementById("yesBtn").onclick = () => {
    affection += 2;
    rejectCount = 0;
    yesScale = 1.0;
    document.getElementById("yesBtn").style.transform = "scale(1)";
    updateStatus();
    if (affection >= 10) {
        showSuccess();
    } else {
        newQuestion();
    }
};

document.getElementById("noBtn").onclick = () => {
    const replies = ["ä¸è®¸é€‰è¿™ä¸ª!", "ä¸è¦", "æˆ‘ä¼šå¾ˆä¼¤å¿ƒ..", "è¦ä¸å†æƒ³æƒ³?", "ä½ è®¤çœŸçš„å—..", "ä¸è¡Œ("];
    document.getElementById("noBtn").innerText = replies[Math.floor(Math.random() * replies.length)];
    affection = Math.max(0, affection - 1);
    rejectCount++;
    yesScale = Math.min(2.0, 1.0 + rejectCount * 0.2);
    document.getElementById("yesBtn").style.transform = `scale(${yesScale})`;
    updateStatus();
};

function updateStatus() {
    document.getElementById("affection").innerText = `äº²å¯†åº¦: ${affection}/10`;
    const hint = document.getElementById("hint");
    if (rejectCount === 1) hint.innerText = "ğŸ’” ä½ æ‹’ç»äº†æˆ‘å‡ æ¬¡å‘¢...å¿«ç‚¹å‡»åŒæ„æŒ‰é’®å§ï¼";
    else if (rejectCount === 2) hint.innerText = "ğŸ’” è¦ä¸è¦å†è€ƒè™‘ä¸€ä¸‹ï¼Ÿ";
    else if (rejectCount >= 3) hint.innerText = "ğŸ˜­ åˆ«å†æ‹’ç»å•¦ï¼å¿«ç‚¹å‡»é‚£ä¸ªå¤§å¤§çš„åŒæ„æŒ‰é’®å§ï¼";
}

function showSuccess() {
    document.getElementById("game").style.display = "none";
    document.getElementById("successPage").style.display = "block";
    confetti(); // åŠ¨ç”»
}

function showMenu() {
    document.getElementById("successPage").style.display = "none";
    document.getElementById("menuPage").style.display = "block";
}

function showTab(tab) {
    const c = document.getElementById("content");
    if (tab === "letter") {
        const letters = [
            `äº²çˆ±çš„${nickname}ï¼Œé‡è§ä½ æ˜¯æˆ‘ä¸€ç”Ÿä¸­æœ€ç¾çš„æ„å¤–ã€‚`,
            `ç»™æœ€ç‰¹åˆ«çš„${nickname}ï¼šä½ çš„ç¬‘å®¹æ˜¯æˆ‘æ¯å¤©æœ€æœŸå¾…çš„é£æ™¯ã€‚`,
            `è‡´${nickname}ï¼šæˆ‘æƒ³æŠŠæ‰€æœ‰çš„æ¸©æŸ”éƒ½ç»™ä½ ï¼Œå› ä¸ºä½ å°±æ˜¯æˆ‘çš„å…¨ä¸–ç•Œã€‚`,
            `äº²çˆ±çš„${nickname}ï¼Œå’Œä½ åœ¨ä¸€èµ·çš„æ¯ä¸€åˆ»éƒ½å€¼å¾—çè—ã€‚`
        ];
        c.innerHTML = `<p>${letters[Math.floor(Math.random() * letters.length)]}</p>`;
    } else if (tab === "game") {
        c.innerHTML = `<p>ğŸ® æƒ…ä¾£å°æ¸¸æˆæ­£åœ¨å»ºè®¾ä¸­...</p>`;
    } else if (tab === "memory") {
        c.innerHTML = `<p>ğŸ“¸ æˆ‘ä»¬çš„è®°å¿†æ­£åœ¨åŠ è½½...</p>`;
    } else if (tab === "music") {
        c.innerHTML = `<p>ğŸµ ä½ é€‰æ‹©çš„æ­Œæ›²ä¼šä¼ é€’ç»™${nickname}çš„å¿ƒï¼</p>`;
    }
}

// èƒŒæ™¯éŸ³ä¹æ§åˆ¶
function toggleMusic() {
    const audio = document.getElementById("bgm");
    if (audio.paused) audio.play();
    else audio.pause();
}

// ç®€å•æ°”çƒåŠ¨ç”»
function confetti() {
    const duration = 1 * 1000;
    const end = Date.now() + duration;
    (function frame() {
        const colors = ['#ff4f6d', '#ffb6c1', '#ff69b4'];
        const el = document.createElement('div');
        el.style.position = 'fixed';
        el.style.top = Math.random() * window.innerHeight + 'px';
        el.style.left = Math.random() * window.innerWidth + 'px';
        el.style.width = '10px';
        el.style.height = '10px';
        el.style.borderRadius = '50%';
        el.style.background = colors[Math.floor(Math.random() * colors.length)];
        el.style.opacity = 0.8;
        document.body.appendChild(el);
        setTimeout(() => el.remove(), 1000);
        if (Date.now() < end) requestAnimationFrame(frame);
    })();
}
</script>

</body>
</html>
